<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Form → Full Page (GitHub Pages)</title>
  <style>
    :root{--accent:#0ea5a4;--bg:#f7fafc;--card:#ffffff;--muted:#6b7280}
    *{box-sizing:border-box}
    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;background:var(--bg);margin:0;color:#0f172a}
    .container{max-width:980px;margin:36px auto;padding:18px}
    .card{background:var(--card);border-radius:12px;padding:20px;box-shadow:0 6px 20px rgba(2,6,23,0.06)}
    h1{margin:0 0 12px;font-size:20px}
    label{display:block;font-size:13px;margin:12px 0 6px;color:var(--muted)}
    input[type=text], textarea, select{width:100%;padding:10px;border-radius:8px;border:1px solid #e6edf0;background:#fbfeff}
    textarea{min-height:120px;resize:vertical}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .actions{display:flex;gap:10px;align-items:center;margin-top:16px}
    button{background:var(--accent);color:white;border:0;padding:10px 14px;border-radius:10px;cursor:pointer}
    button.ghost{background:transparent;color:var(--accent);border:1px solid rgba(14,165,164,0.15)}
    .preview-page{margin-top:22px}
    .fullpage{background:white;border-radius:12px;overflow:hidden}
    .hero{padding:36px;text-align:center}
    .hero h2{margin:0;font-size:28px}
    .hero p{color:var(--muted);margin:8px 0 0}
    .cover{height:220px;background:#e2e8f0;display:flex;align-items:center;justify-content:center;color:#94a3b8}
    .metadata{padding:22px}
    .field{margin:8px 0}
    .small{font-size:13px;color:var(--muted)}
    @media (max-width:700px){.row{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>First Page — Data Entry</h1>
      <form id="entryForm">
        <label for="pageTitle">Page Title</label>
        <input id="pageTitle" name="pageTitle" type="text" placeholder="Enter title (e.g. My Project)" required />

        <label for="subtitle">Subtitle / Short description</label>
        <input id="subtitle" name="subtitle" type="text" placeholder="Short subtitle" />

        <div class="row">
          <div>
            <label for="author">Author / Byline</label>
            <input id="author" name="author" type="text" placeholder="Your name" />
          </div>
          <div>
            <label for="date">Date (optional)</label>
            <input id="date" name="date" type="text" placeholder="e.g. September 25, 2025" />
          </div>
        </div>

        <label for="coverText">Main content (HTML allowed)</label>
        <textarea id="coverText" name="coverText" placeholder="Write the main page content here. You can paste simple HTML like <strong>bold</strong>."></textarea>

        <label for="coverImage">Cover image (URL)</label>
        <input id="coverImage" name="coverImage" type="text" placeholder="https://... (leave blank for gray cover)" />

        <div class="actions">
          <button type="submit">Create Full Page</button>
          <button type="button" id="previewBtn" class="ghost">Live Preview</button>
          <button type="button" id="resetBtn" class="ghost">Reset</button>
        </div>
      </form>

      <div id="previewArea" class="preview-page" hidden>
        <h2 class="small">Preview</h2>
        <div id="fullPageContainer"></div>
      </div>

    </div>

    <div style="margin-top:16px;text-align:center;color:var(--muted);font-size:13px">
      This single file can be deployed to GitHub Pages — just push this as <code>index.html</code> to the repo root and enable Pages.
    </div>
  </div>

  <script>
    const form = document.getElementById('entryForm');
    const previewArea = document.getElementById('previewArea');
    const container = document.getElementById('fullPageContainer');
    const previewBtn = document.getElementById('previewBtn');
    const resetBtn = document.getElementById('resetBtn');

    function createFullPageHtml(data){
      // Basic sanitization for displayed HTML: only allow tags in a whitelist
      const allowedTags = ['b','i','strong','em','p','br','ul','ol','li','a','h2','h3','blockquote','pre'];
      function sanitizeHTML(input){
        // naive sanitizer: remove angle brackets for disallowed tags
        return input.replace(/<\/?([^>]+)>/g,(m,tag)=>{
          const t = tag.split(/\s+/)[0].toLowerCase();
          if(allowedTags.includes(t)) return `<${tag}>`;
          return '&lt;'+tag+'&gt;';
        });
      }

      const title = escapeHtml(data.pageTitle || 'Untitled');
      const subtitle = escapeHtml(data.subtitle || '');
      const author = escapeHtml(data.author || '');
      const date = escapeHtml(data.date || '');
      const cover = data.coverImage ? `style="background-image:url('${escapeAttr(data.coverImage)}');background-size:cover;background-position:center;"` : '';
      const content = sanitizeHTML(data.coverText || '');

      return `
        <div class="fullpage card">
          <div class="cover" ${cover}>
            ${data.coverImage ? '' : '<div>Cover image</div>'}
          </div>
          <div class="metadata">
            <div style="text-align:center">
              <h2>${title}</h2>
              <p class="small">${subtitle}</p>
            </div>
            <div style="margin-top:18px">
              <div class="field"><strong>By:</strong> ${author || '—'}</div>
              <div class="field"><strong>Date:</strong> ${date || '—'}</div>
            </div>
            <hr style="margin:18px 0;border:none;border-top:1px solid #eef2f7"/>
            <div>${content}</div>
          </div>
        </div>
      `;
    }

    function escapeHtml(s){
      if(!s) return '';
      return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
    }
    function escapeAttr(s){
      return s.replace(/"/g,'&quot;').replace(/'/g,'&#39;');
    }

    form.addEventListener('submit', (e)=>{
      e.preventDefault();
      const data = Object.fromEntries(new FormData(form).entries());
      const html = createFullPageHtml(data);
      container.innerHTML = html;
      previewArea.hidden = false;

      // Open the created page in a new tab as a standalone HTML
      const standalone = wrapStandaloneHtml(html, data.pageTitle || 'Untitled');
      const blob = new Blob([standalone], {type:'text/html'});
      const url = URL.createObjectURL(blob);
      // open new tab with the result (user gesture allowed because it's invoked by submit)
      window.open(url, '_blank');
    });

    previewBtn.addEventListener('click', ()=>{
      const data = Object.fromEntries(new FormData(form).entries());
      const html = createFullPageHtml(data);
      container.innerHTML = html;
      previewArea.hidden = false;
    });

    resetBtn.addEventListener('click', ()=>{
      form.reset();
      container.innerHTML = '';
      previewArea.hidden = true;
    });

    function wrapStandaloneHtml(innerHtml, title){
      return `<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>${escapeHtml(title)}</title><style>body{font-family:Inter,system-ui,Arial;background:#f3f4f6;margin:0;padding:30px} .fullpage{max-width:900px;margin:0 auto;background:white;border-radius:10px;overflow:hidden;box-shadow:0 6px 30px rgba(2,6,23,0.06)} .cover{height:260px;background:#e2e8f0;display:flex;align-items:center;justify-content:center;color:#94a3b8} .metadata{padding:26px} .small{color:#6b7280;font-size:14px} h2{margin:0 0 8px}</style></head><body>${innerHtml}</body></html>`;
    }

  </script>
</body>
</html>
